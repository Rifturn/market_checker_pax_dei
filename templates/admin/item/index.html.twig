{% extends 'base_admin.html.twig' %}

{% block title %}Gestion des Items{% endblock %}

{% block body %}
<div class="container mt-4">
    <h1>üì¶ Gestion des Items</h1>
    <p class="text-muted">{{ totalItems }} items au total</p>
    
    <div class="mb-4 d-flex gap-2">
        <a href="{{ path('admin_item_new') }}" class="btn btn-primary">‚ûï Nouvel item</a>
        <a href="/admin" class="btn btn-secondary">‚Üê Dashboard</a>
    </div>

    <div class="table-responsive">
        <table id="itemsTable" class="table table-striped table-hover table-sm">
        <thead>
            <tr>
                <th>ID</th>
                <th>ID Externe</th>
                <th>Nom (FR)</th>
                <th>Cat√©gorie</th>
                <th>Date cr√©ation</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
        {% for item in items %}
            <tr>
                <td>{{ item.id }}</td>
                <td>{{ item.externalId }}</td>
                <td>{{ item.name.Fr ?? 'N/A' }}</td>
                <td>{{ item.category ? item.category.name : 'Aucune' }}</td>
                <td>{{ item.createdAt|date('d/m/Y H:i') }}</td>
                <td>
                    <a href="{{ path('admin_item_show', {'id': item.id}) }}" class="btn btn-sm btn-info">üëÅÔ∏è Voir</a>
                    <a href="{{ path('admin_item_edit', {'id': item.id}) }}" class="btn btn-sm btn-warning">‚úèÔ∏è √âditer</a>
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="6">Aucun item trouv√©</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    </div>
</div>

<script>
$(document).ready(function() {
    $('#itemsTable').DataTable({
        language: {
            url: '//cdn.datatables.net/plug-ins/1.13.7/i18n/fr-FR.json'
        },
        pageLength: 50,
        order: [[2, 'asc']],
        scrollX: true,
        autoWidth: false,
        columnDefs: [
            { orderable: false, targets: 5 }
        ]
    });
});
</script>
{% endblock %}
